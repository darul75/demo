/** 
* @license planetary-twitter - v0.0.1
* (c) 2013 Julien VALERY https://github.com/darul75/ng-prettyjson
* License: MIT 
**/
var stats=function(){return function(a){a.plugins.stats={},a.plugins.redraw=!1,a.onInit(function(b){d3.json("/twitter",function(c,d){if(c)return alert("Problem loading the quake data."),void 0;if(!d||"nok"===d.result)return b(),void 0;var e=d;land=topojson.feature(e,e.objects.collection),a.plugins.stats.topology=land,b()})});var b,c,d="",e=new Date,f=!0;setInterval(function(){d3.json("/twitter",function(g,h){if(g)return alert("Problem loading the quake data."),void 0;if(h&&"nok"!==h.result){e=new Date;var i=Math.floor(Math.random()*(h.objects.collection.geometries.length-0+1))+0;d=h.objects.collection.geometries[i].properties.text,b=h.objects.collection.geometries[i].properties.lat,c=h.objects.collection.geometries[i].properties.lng,f=!0;var j=h;land=topojson.feature(j,j.objects.collection),a.plugins.stats.topology=land}})},7e3),a.onDraw(function(){a.withSavedContext(function(g){if(a.plugins.stats){g.beginPath(),g.strokeStyle="#FFFFFF",g.globalAlpha=1,g.fillStyle="#FFFFFF",g.font="italic 40pt Calibri",g.fillText("#football",500,500),g.font="italic 12pt Calibri",g.fillText(d,60,400),g.stroke(),g.strokeStyle="white",g.globalAlpha=.5,g.shadowColor="#eeeeee",g.shadowBlur=20,g.shadowOffsetX=2,g.shadowOffsetY=2,g.globalAlpha=.5,a.path.context(g).pointRadius(.01),a.path.context(g)(a.plugins.stats.topology),g.stroke();{170*Math.random()-85,360*Math.random()-180}if(b&&f){g.strokeStyle="white",g.globalAlpha=.5,g.shadowColor="#eeeeee",g.shadowBlur=20,g.shadowOffsetX=2,g.shadowOffsetY=2,g.globalAlpha=.5;var h=new Date-e,i=1-h/2e3,j=d3.rgb("#FFFFFF");j="rgba("+j.r+","+j.g+","+j.b+","+i+")",g.strokeStyle=j;var k=8*Math.random(),l=d3.geo.circle().origin([c,b]).angle(h/2e3*k)();a.path.context(g)(l),g.stroke(),setTimeout(function(){f=!1},2e3)}g.stroke()}})})}};